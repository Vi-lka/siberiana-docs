import Image from 'next/image'

# Пагинация

Пагина́ция — порядковая нумерация страниц.

Позволяет выводить не все результаты разом, а "постранично".  
Используется для уменьшения нагрузки на сеть и удобства в интерфейстах.

`Cursor` - идентификатор эллемента в массиве. Используется для указания пагинации в массиве.

## Поля

Для определения состяния пагинации используются поля в `pageInfo`:

    - `cursor` - Идентификатор эллемента в массиве
    - `startCursor` - Первый `Cursor` в массиве
    - `endCursor` - Последний `Cursor` в массиве
    - `hasNextPage` - Имеется ли следующая страница (На последней странице: `false`)
    - `hasPreviousPage` - Имеется ли предыдущая страница (На первой странице: `false`)

## Параметры

    - `first` - Вернет первые X объектов
    - `last` - Вернет последние X объектов
    - `offset` - Исключит X объектов  
    (при `first` исключит **первые** X, при `last` исключит **последние** X)
    - `after` - Вернет все после указанного `Cursor`
    - `before` - Вернет все до указанного `Cursor`

Пример пагинации:
    <Image src="/content/pagination.png" alt="pagination" width={1000} height={1000} />

Мы получили первых **3** объекта, начиная с `Cursor`-а `gaFpzwAAAAMAAAAB` и до `gaFpzwAAAAMAAAAm`

## Определение страницы

Для определения общего количества страниц используется формула на front-end стороне:

```typescript showLineNumbers
    const max_page = Math.ceil(totalCount / per)
    // Метод Math.ceil() производит округление дробного числа до целого в большую сторону.
    // totalCount - общее количество объектов без пагинации
    // per - количество объектов на странице
```

Для указания номера страницы:

Передаем `fist` и `offset`.  
Для `first` берем количество объектов на странице, `offset` высчитываем по:
```typescript showLineNumbers
    const offset = (page - 1) * per
    // page - желаемая страница
    // per - количество объектов на странице
    // (page - 1) - потому что отсчет в API идет с 0, а не с 1 как привычно человеку
```